{"remainingRequest":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huajuncheng/Documents/git-prj/vue-main-web/src/components/layout/components/Sidebar/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/src/components/layout/components/Sidebar/index.vue","mtime":1667785065886},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js","mtime":1663934044381},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js","mtime":1663934057394}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBTY3JvbGxiYXIgfSBmcm9tICdlbGVtZW50LXVpJwppbXBvcnQgU2lkZWJhckl0ZW0gZnJvbSAnLi9TaWRlYmFySXRlbScKaW1wb3J0IHsgc3BsaXRVcmwgfSBmcm9tICdAL3V0aWxzL3FpYW5rdW5NZXRob2RzLmpzJwppbXBvcnQgeyBjb25zdGFudFJvdXRlcyB9IGZyb20gJ0Avcm91dGVyL2luZGV4JwppbXBvcnQgdmFyaWFibGVzIGZyb20gJ0Avc3R5bGVzL3ZhcmlhYmxlcy5zY3NzJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgU2lkZWJhckl0ZW0sIGVsU2Nyb2xsYmFyOiBTY3JvbGxiYXIgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWxsTWVudXNmdWxsOiBbXQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWwogICAgICAnc2lkZWJhcicKICAgIF0pLAogICAgcm91dGVzKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGVyLm9wdGlvbnMucm91dGVzCiAgICB9LAogICAgYWN0aXZlTWVudSgpIHsKICAgICAgY29uc3Qgcm91dGUgPSB0aGlzLiRyb3V0ZQogICAgICBjb25zdCB7IHBhdGggfSA9IHJvdXRlCiAgICAgIHJldHVybiBwYXRoCiAgICB9LAogICAgdmFyaWFibGVzKCkgewogICAgICByZXR1cm4gdmFyaWFibGVzCiAgICB9LAogICAgaXNDb2xsYXBzZSgpIHsKICAgICAgcmV0dXJuICF0aGlzLnNpZGViYXIub3BlbmVkCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5tYWtlQWxsRHluYW1pY01lbnVzKCkKICAgIHRoaXMubWFrZVN0YXRpY1JvdXRlcigpCiAgfSwKICBtZXRob2RzOiB7CiAgICBmdWxsTWVudUluZm8oZWxlbWVudCkgewogICAgICBlbGVtZW50LnBhdGggPSBlbGVtZW50LmlkCiAgICAgIGVsZW1lbnQubWV0YSA9IHsKICAgICAgICBpY29uOiBlbGVtZW50Lmljb24gfHwgZWxlbWVudC5wcml2aWxlZ2VJY29uLAogICAgICAgIHRpdGxlOiBlbGVtZW50Lm5hbWUKICAgICAgfQogICAgfSwKICAgIGZ1bGxSb3V0ZXJuZm8oZWxlbWVudCkgewogICAgICBjb25zdCBwYXRoU3BsaXQgPSBzcGxpdFVybChlbGVtZW50LnVybCkKICAgICAgY29uc3QgYWxsUGF0aCA9IHBhdGhTcGxpdFsxXQogICAgICBlbGVtZW50LnBhdGggPSBhbGxQYXRoCiAgICAgIGVsZW1lbnQubWV0YSA9IHsKICAgICAgICB0aXRsZTogZWxlbWVudC5uYW1lCiAgICAgIH0KICAgIH0sCiAgICBmdWxsRmlzcnROb0NoaWxkcmVuKGVsZW1lbnQpIHsKICAgICAgY29uc3QgcGF0aFNwbGl0ID0gc3BsaXRVcmwoZWxlbWVudC51cmwpCiAgICAgIGNvbnN0IGFsbFBhdGggPSBwYXRoU3BsaXRbMV0KICAgICAgY29uc3Qgc3BsaXRQYXRoID0gYWxsUGF0aC5zcGxpdCgnLycpCiAgICAgIGNvbnN0IGZpcnN0UGF0aCA9IHNwbGl0UGF0aFsxXQogICAgICBlbGVtZW50LnBhdGggPSBgLyR7Zmlyc3RQYXRofSR7ZWxlbWVudC5pZH1gCiAgICAgIGVsZW1lbnQubWV0YSA9IHsKICAgICAgICB0aXRsZTogZWxlbWVudC5uYW1lCiAgICAgIH0KICAgICAgZWxlbWVudC5jaGlsZHJlbiA9IFsKICAgICAgICB7CiAgICAgICAgICBwYXRoOiBhbGxQYXRoLAogICAgICAgICAgbmFtZTogZWxlbWVudC5pZCwKICAgICAgICAgIG1ldGE6IHsgdGl0bGU6IGVsZW1lbnQubmFtZSwgaWNvbjogJ2Zvcm0nIH0KICAgICAgICB9CiAgICAgIF0KICAgIH0sCiAgICBtYWtlQWxsRHluYW1pY01lbnVzKCkgewogICAgICBjb25zdCBhbGxJbmZvSnNvbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWxsVXNlckluZm8nKSB8fCAne30nCiAgICAgIGNvbnN0IGFsbFVzZXJJbmZvID0gSlNPTi5wYXJzZShhbGxJbmZvSnNvbikKICAgICAgY29uc3QgbWVudXMgPSBhbGxVc2VySW5mby5tZW51cyB8fCBbXQogICAgICAvLyDljZXmjpIKICAgICAgZm9yIChsZXQgZmlyc3RJbmRleCA9IDA7IGZpcnN0SW5kZXggPCBtZW51cy5sZW5ndGg7IGZpcnN0SW5kZXgrKykgewogICAgICAgIGNvbnN0IGZpcnN0RWxlbWVudCA9IG1lbnVzW2ZpcnN0SW5kZXhdIHx8IHt9CiAgICAgICAgdGhpcy5mdWxsRmlzcnROb0NoaWxkcmVuKGZpcnN0RWxlbWVudCkKICAgICAgfQogICAgICB0aGlzLmFsbE1lbnVzZnVsbCA9IG1lbnVzCiAgICB9LAogICAgbWFrZVN0YXRpY1JvdXRlcigpIHsKICAgICAgLy8gY29weeS4gOS4iyDkuI3og73noLTlnY/ot6/nlLHljp/lp4vmlofku7YKICAgICAgY29uc3QgY29uc3RhbnRSb3V0ZXNDb3B5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdGFudFJvdXRlcykpCiAgICAgIGNvbnN0IG1lbnVzTm9IaWRkZW4gPSBjb25zdGFudFJvdXRlc0NvcHkuZmlsdGVyKGl0ZW0gPT4gIWl0ZW0uaGlkZGVuKQogICAgICB0aGlzLmFsbE1lbnVzZnVsbCA9IFsuLi5tZW51c05vSGlkZGVuLCAuLi50aGlzLmFsbE1lbnVzZnVsbF0KICAgICAgY29uc29sZS5sb2coJ+W3puS+p+WFqOmHj+eahOiPnOWNleaVsOaNruS4ujonLCB0aGlzLmFsbE1lbnVzZnVsbCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAoBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/layout/components/Sidebar","sourcesContent":["<template>\n  <div>\n    <el-scrollbar wrap-class=\"scrollbar-wrapper\">\n      <el-menu\n        :default-active=\"activeMenu\"\n        :collapse=\"isCollapse\"\n        :background-color=\"variables.menuBg\"\n        :text-color=\"variables.menuText\"\n        :unique-opened=\"false\"\n        :active-text-color=\"variables.menuActiveText\"\n        :collapse-transition=\"false\"\n        mode=\"vertical\"\n      >\n        <sidebar-item v-for=\"route in allMenusfull\" :key=\"route.path\" :item=\"route\" :base-path=\"route.path\" />\n      </el-menu>\n    </el-scrollbar>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { Scrollbar } from 'element-ui'\nimport SidebarItem from './SidebarItem'\nimport { splitUrl } from '@/utils/qiankunMethods.js'\nimport { constantRoutes } from '@/router/index'\nimport variables from '@/styles/variables.scss'\n\nexport default {\n  components: { SidebarItem, elScrollbar: Scrollbar },\n  data() {\n    return {\n      allMenusfull: []\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'sidebar'\n    ]),\n    routes() {\n      return this.$router.options.routes\n    },\n    activeMenu() {\n      const route = this.$route\n      const { path } = route\n      return path\n    },\n    variables() {\n      return variables\n    },\n    isCollapse() {\n      return !this.sidebar.opened\n    }\n  },\n  created() {\n    this.makeAllDynamicMenus()\n    this.makeStaticRouter()\n  },\n  methods: {\n    fullMenuInfo(element) {\n      element.path = element.id\n      element.meta = {\n        icon: element.icon || element.privilegeIcon,\n        title: element.name\n      }\n    },\n    fullRouternfo(element) {\n      const pathSplit = splitUrl(element.url)\n      const allPath = pathSplit[1]\n      element.path = allPath\n      element.meta = {\n        title: element.name\n      }\n    },\n    fullFisrtNoChildren(element) {\n      const pathSplit = splitUrl(element.url)\n      const allPath = pathSplit[1]\n      const splitPath = allPath.split('/')\n      const firstPath = splitPath[1]\n      element.path = `/${firstPath}${element.id}`\n      element.meta = {\n        title: element.name\n      }\n      element.children = [\n        {\n          path: allPath,\n          name: element.id,\n          meta: { title: element.name, icon: 'form' }\n        }\n      ]\n    },\n    makeAllDynamicMenus() {\n      const allInfoJson = window.localStorage.getItem('allUserInfo') || '{}'\n      const allUserInfo = JSON.parse(allInfoJson)\n      const menus = allUserInfo.menus || []\n      // 单排\n      for (let firstIndex = 0; firstIndex < menus.length; firstIndex++) {\n        const firstElement = menus[firstIndex] || {}\n        this.fullFisrtNoChildren(firstElement)\n      }\n      this.allMenusfull = menus\n    },\n    makeStaticRouter() {\n      // copy一下 不能破坏路由原始文件\n      const constantRoutesCopy = JSON.parse(JSON.stringify(constantRoutes))\n      const menusNoHidden = constantRoutesCopy.filter(item => !item.hidden)\n      this.allMenusfull = [...menusNoHidden, ...this.allMenusfull]\n      console.log('左侧全量的菜单数据为:', this.allMenusfull)\n    }\n  }\n}\n</script>\n"]}]}