{"remainingRequest":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huajuncheng/Documents/git-prj/vue-main-web/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/src/views/login/index.vue","mtime":1667785065887},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js","mtime":1663934044381},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js","mtime":1663934057394}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHNldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsgLy8gZ2V0IHRva2VuIGZyb20gY29va2llCmltcG9ydCB7IGluaXRTdGF0ZSB9IGZyb20gIkAvaW5pdFFpYW5rdW5TdGF0ZS9pbmRleC5qcyI7CmltcG9ydCB7IG1ha2VBbGxSb3V0ZXIgfSBmcm9tICJAL21ha2VBbGxDb21wb25lbnRSb3V0ZXIvaW5kZXguanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhKCkgewogICAgY29uc3QgdmFsaWRhdGVQYXNzd29yZCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8IDEpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuWvhueggeS4jeiDveS9juS6jjHkvY0iKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGxvZ2luRm9ybTogewogICAgICAgIHVzZXJOYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICAgIGxvZ2luUnVsZXM6IHsKICAgICAgICB1c2VyTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogImJsdXIiLCBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiB9LAogICAgICAgIF0sCiAgICAgICAgcGFzc3dvcmQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICJibHVyIiwgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3N3b3JkIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgcGFzc3dvcmRUeXBlOiAicGFzc3dvcmQiLAogICAgICBjYXBzVG9vbHRpcDogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5sb2dpbkZvcm0udXNlck5hbWUgPT09ICIiKSB7CiAgICAgIHRoaXMuJHJlZnMudXNlck5hbWUuZm9jdXMoKTsKICAgIH0gZWxzZSBpZiAodGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQgPT09ICIiKSB7CiAgICAgIHRoaXMuJHJlZnMucGFzc3dvcmQuZm9jdXMoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoZWNrQ2Fwc2xvY2soZSkgewogICAgICBjb25zdCB7IGtleSB9ID0gZTsKICAgICAgdGhpcy5jYXBzVG9vbHRpcCA9IGtleSAmJiBrZXkubGVuZ3RoID09PSAxICYmIGtleSA+PSAiQSIgJiYga2V5IDw9ICJaIjsKICAgIH0sCiAgICBzaG93UHdkKCkgewogICAgICBpZiAodGhpcy5wYXNzd29yZFR5cGUgPT09ICJwYXNzd29yZCIpIHsKICAgICAgICB0aGlzLnBhc3N3b3JkVHlwZSA9ICIiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFzc3dvcmRUeXBlID0gInBhc3N3b3JkIjsKICAgICAgfQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5wYXNzd29yZC5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVMb2dpbigpIHsKICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IHsKICAgICAgICAgICAgICBuYW1lOiAic3RldmVuIiwKICAgICAgICAgICAgICB1c2VybmFtZTogInN0ZXZlbiIsCiAgICAgICAgICAgICAgYXV0aFRva2VuOiAiNDAwZTQzODYtMzhmMS00ZDU2LWFiNjMtYTliMGEyNjk0MzQ0ZGMiLAogICAgICAgICAgICAgIG1lbnVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICLmiYvmnLrkuJrliqHmnaXoh6rlrZDlupTnlKh1cmwiLAogICAgICAgICAgICAgICAgICBpZDogInN1Yl9hcHAiLAogICAgICAgICAgICAgICAgICB1cmw6ICJodHRwOi8vMTkyLjE2OC4xLjEwODo4MDgxLyMvc3Vib3JpZ2luL3N1Ym9yaWdpbiIgLy8g5a2Q57O757uf6Lev55SxCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAi55S16K+d5Lia5Yqh5p2l6Ieq5a2Q5bqU55SodXJsIiwKICAgICAgICAgICAgICAgICAgaWQ6ICJzdWJfYXBwMiIsCiAgICAgICAgICAgICAgICAgIHVybDogImh0dHA6Ly8xOTIuMTY4LjEuMTA4OjgwODEvIy9zdWJhdHRyL3N1YmF0dHIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlczsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhbGxVc2VySW5mbyIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpOwogICAgICAgICAgICAvLyDliJ3lp4vljJbkub7lnaTnirbmgIEKICAgICAgICAgICAgaW5pdFN0YXRlKCk7CiAgICAgICAgICAgIC8vIGluaXRTdGF0ZeS5i+WQjiB3aW5kb3cuYWN0aW9uc1FpYW5rdW7kuIDlrprmmK/lrZjlnKjnmoQg5Y+v5Lul5pS+5b+D5Y+Y5pu0dG9rZW4KICAgICAgICAgICAgd2luZG93LmFjdGlvbnNRaWFua3VuLnNldEdsb2JhbFN0YXRlKHsKICAgICAgICAgICAgICBhdXRoVG9rZW46IHJlc3VsdC5hdXRoVG9rZW4sCiAgICAgICAgICAgICAgYXBwTmFtZTogIldPUktTUEFDRSIsCiAgICAgICAgICAgICAgZXZlbnRUeXBlOiAiU0VUX1RPS0VOIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIOWIneWni+WMlui3r+eUsQogICAgICAgICAgICBtYWtlQWxsUm91dGVyKCk7CiAgICAgICAgICAgIHNldFRva2VuKHJlc3VsdC5hdXRoVG9rZW4pOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogIkRhc2hib2FyZCIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3Igc3VibWl0ISEiKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-form\n      ref=\"loginForm\"\n      :model=\"loginForm\"\n      :rules=\"loginRules\"\n      class=\"login-form\"\n      autocomplete=\"on\"\n      label-position=\"left\"\n    >\n      <div class=\"title-container\">\n        <h3 class=\"title\">微前端主应用workspace</h3>\n      </div>\n\n      <el-form-item prop=\"userName\">\n        <span class=\"svg-container\">\n          <svg-icon icon-class=\"user\" />\n        </span>\n        <el-input\n          ref=\"userName\"\n          v-model=\"loginForm.userName\"\n          placeholder=\"用户名\"\n          name=\"userName\"\n          type=\"text\"\n          tabindex=\"1\"\n          autocomplete=\"on\"\n        />\n      </el-form-item>\n\n      <el-tooltip\n        v-model=\"capsTooltip\"\n        content=\"Caps lock is On\"\n        placement=\"right\"\n        manual\n      >\n        <el-form-item prop=\"password\">\n          <span class=\"svg-container\">\n            <svg-icon icon-class=\"password\" />\n          </span>\n          <el-input\n            :key=\"passwordType\"\n            ref=\"password\"\n            v-model=\"loginForm.password\"\n            :type=\"passwordType\"\n            placeholder=\"密码\"\n            name=\"password\"\n            tabindex=\"2\"\n            autocomplete=\"on\"\n            @keyup.native=\"checkCapslock\"\n            @blur=\"capsTooltip = false\"\n            @keyup.enter.native=\"handleLogin\"\n          />\n          <span class=\"show-pwd\" @click=\"showPwd\">\n            <svg-icon\n              :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\n            />\n          </span>\n        </el-form-item>\n      </el-tooltip>\n\n      <el-button\n        :loading=\"loading\"\n        type=\"primary\"\n        style=\"width: 100%; margin-bottom: 30px\"\n        @click.native.prevent=\"handleLogin\"\n        >登录</el-button\n      >\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { setToken } from \"@/utils/auth\"; // get token from cookie\nimport { initState } from \"@/initQiankunState/index.js\";\nimport { makeAllRouter } from \"@/makeAllComponentRouter/index.js\";\nexport default {\n  name: \"Login\",\n  data() {\n    const validatePassword = (rule, value, callback) => {\n      if (value.length < 1) {\n        callback(new Error(\"密码不能低于1位\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      loginForm: {\n        userName: \"\",\n        password: \"\",\n      },\n      loginRules: {\n        userName: [\n          { required: true, trigger: \"blur\", message: \"请输入用户名\" },\n        ],\n        password: [\n          { required: true, trigger: \"blur\", validator: validatePassword },\n        ],\n      },\n      passwordType: \"password\",\n      capsTooltip: false,\n      loading: false,\n    };\n  },\n  mounted() {\n    if (this.loginForm.userName === \"\") {\n      this.$refs.userName.focus();\n    } else if (this.loginForm.password === \"\") {\n      this.$refs.password.focus();\n    }\n  },\n  methods: {\n    checkCapslock(e) {\n      const { key } = e;\n      this.capsTooltip = key && key.length === 1 && key >= \"A\" && key <= \"Z\";\n    },\n    showPwd() {\n      if (this.passwordType === \"password\") {\n        this.passwordType = \"\";\n      } else {\n        this.passwordType = \"password\";\n      }\n      this.$nextTick(() => {\n        this.$refs.password.focus();\n      });\n    },\n    handleLogin() {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          setTimeout(() => {\n            const res = {\n              name: \"steven\",\n              username: \"steven\",\n              authToken: \"400e4386-38f1-4d56-ab63-a9b0a2694344dc\",\n              menus: [\n                {\n                  name: \"手机业务来自子应用url\",\n                  id: \"sub_app\",\n                  url: \"http://192.168.1.108:8081/#/suborigin/suborigin\" // 子系统路由\n                },\n                {\n                  name: \"电话业务来自子应用url\",\n                  id: \"sub_app2\",\n                  url: \"http://192.168.1.108:8081/#/subattr/subattr\"\n                },\n              ],\n            };\n            const result = res;\n            window.localStorage.setItem(\"allUserInfo\", JSON.stringify(result));\n            // 初始化乾坤状态\n            initState();\n            // initState之后 window.actionsQiankun一定是存在的 可以放心变更token\n            window.actionsQiankun.setGlobalState({\n              authToken: result.authToken,\n              appName: \"WORKSPACE\",\n              eventType: \"SET_TOKEN\",\n            });\n            // 初始化路由\n            makeAllRouter();\n            setToken(result.authToken);\n            this.$router.push({\n              name: \"Dashboard\",\n            });\n            this.loading = false;\n          }, 1000);\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n/* 修复input 背景不协调 和光标变色 */\n/* Detail see https://github.com/PanJiaChen/vue-element-admin/pull/927 */\n\n$bg: #283443;\n$light_gray: #fff;\n$cursor: #fff;\n\n@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\n  .login-container .el-input input {\n    color: $cursor;\n  }\n}\n\n/* reset element-ui css */\n.login-container {\n  .el-input {\n    display: inline-block;\n    height: 47px;\n    width: 85%;\n    margin-left: 10px;\n\n    input {\n      background: transparent;\n      border: none;\n    }\n  }\n\n  .el-form-item {\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 5px;\n    color: #454545;\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n$dark_gray: #889aa4;\n$light_gray: #eee;\n\n.login-container {\n  height: 100%;\n  width: 100%;\n  background: url(\"../../assets/login.jpeg\") no-repeat;\n  background-size: cover;\n  overflow: hidden;\n\n  .login-form {\n    position: relative;\n    width: 520px;\n    max-width: 100%;\n    padding: 160px 35px 0;\n    margin: 0 auto;\n    overflow: hidden;\n  }\n\n  .tips {\n    font-size: 14px;\n    color: #fff;\n    margin-bottom: 10px;\n\n    span {\n      &:first-of-type {\n        margin-right: 16px;\n      }\n    }\n  }\n\n  .svg-container {\n    padding: 6px 5px 6px 15px;\n    color: $dark_gray;\n    vertical-align: middle;\n    width: 30px;\n    display: inline-block;\n  }\n\n  .title-container {\n    position: relative;\n\n    .title {\n      font-size: 26px;\n      color: $light_gray;\n      margin: 0px auto 40px auto;\n      text-align: center;\n      font-weight: bold;\n    }\n  }\n\n  .show-pwd {\n    position: absolute;\n    right: 10px;\n    top: 7px;\n    font-size: 16px;\n    color: $dark_gray;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .thirdparty-button {\n    position: absolute;\n    right: 0;\n    bottom: 6px;\n  }\n\n  @media only screen and (max-width: 470px) {\n    .thirdparty-button {\n      display: none;\n    }\n  }\n}\n</style>\n"]}]}