{"remainingRequest":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js!/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huajuncheng/Documents/git-prj/vue-main-web/src/components/layout/components/Sidebar/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/src/components/layout/components/Sidebar/index.vue","mtime":1667785065886},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/babel.config.js","mtime":1666252172553},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js","mtime":1663934044381},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js","mtime":1663934057394}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBTY3JvbGxiYXIgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IFNpZGViYXJJdGVtIGZyb20gJy4vU2lkZWJhckl0ZW0nOwppbXBvcnQgeyBzcGxpdFVybCB9IGZyb20gJ0AvdXRpbHMvcWlhbmt1bk1ldGhvZHMuanMnOwppbXBvcnQgeyBjb25zdGFudFJvdXRlcyB9IGZyb20gJ0Avcm91dGVyL2luZGV4JzsKaW1wb3J0IHZhcmlhYmxlcyBmcm9tICdAL3N0eWxlcy92YXJpYWJsZXMuc2Nzcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTaWRlYmFySXRlbSwKICAgIGVsU2Nyb2xsYmFyOiBTY3JvbGxiYXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhbGxNZW51c2Z1bGw6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydzaWRlYmFyJ10pLAogICAgcm91dGVzKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGVyLm9wdGlvbnMucm91dGVzOwogICAgfSwKICAgIGFjdGl2ZU1lbnUoKSB7CiAgICAgIGNvbnN0IHJvdXRlID0gdGhpcy4kcm91dGU7CiAgICAgIGNvbnN0IHsKICAgICAgICBwYXRoCiAgICAgIH0gPSByb3V0ZTsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9LAogICAgdmFyaWFibGVzKCkgewogICAgICByZXR1cm4gdmFyaWFibGVzOwogICAgfSwKICAgIGlzQ29sbGFwc2UoKSB7CiAgICAgIHJldHVybiAhdGhpcy5zaWRlYmFyLm9wZW5lZDsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm1ha2VBbGxEeW5hbWljTWVudXMoKTsKICAgIHRoaXMubWFrZVN0YXRpY1JvdXRlcigpOwogIH0sCiAgbWV0aG9kczogewogICAgZnVsbE1lbnVJbmZvKGVsZW1lbnQpIHsKICAgICAgZWxlbWVudC5wYXRoID0gZWxlbWVudC5pZDsKICAgICAgZWxlbWVudC5tZXRhID0gewogICAgICAgIGljb246IGVsZW1lbnQuaWNvbiB8fCBlbGVtZW50LnByaXZpbGVnZUljb24sCiAgICAgICAgdGl0bGU6IGVsZW1lbnQubmFtZQogICAgICB9OwogICAgfSwKICAgIGZ1bGxSb3V0ZXJuZm8oZWxlbWVudCkgewogICAgICBjb25zdCBwYXRoU3BsaXQgPSBzcGxpdFVybChlbGVtZW50LnVybCk7CiAgICAgIGNvbnN0IGFsbFBhdGggPSBwYXRoU3BsaXRbMV07CiAgICAgIGVsZW1lbnQucGF0aCA9IGFsbFBhdGg7CiAgICAgIGVsZW1lbnQubWV0YSA9IHsKICAgICAgICB0aXRsZTogZWxlbWVudC5uYW1lCiAgICAgIH07CiAgICB9LAogICAgZnVsbEZpc3J0Tm9DaGlsZHJlbihlbGVtZW50KSB7CiAgICAgIGNvbnN0IHBhdGhTcGxpdCA9IHNwbGl0VXJsKGVsZW1lbnQudXJsKTsKICAgICAgY29uc3QgYWxsUGF0aCA9IHBhdGhTcGxpdFsxXTsKICAgICAgY29uc3Qgc3BsaXRQYXRoID0gYWxsUGF0aC5zcGxpdCgnLycpOwogICAgICBjb25zdCBmaXJzdFBhdGggPSBzcGxpdFBhdGhbMV07CiAgICAgIGVsZW1lbnQucGF0aCA9IGAvJHtmaXJzdFBhdGh9JHtlbGVtZW50LmlkfWA7CiAgICAgIGVsZW1lbnQubWV0YSA9IHsKICAgICAgICB0aXRsZTogZWxlbWVudC5uYW1lCiAgICAgIH07CiAgICAgIGVsZW1lbnQuY2hpbGRyZW4gPSBbewogICAgICAgIHBhdGg6IGFsbFBhdGgsCiAgICAgICAgbmFtZTogZWxlbWVudC5pZCwKICAgICAgICBtZXRhOiB7CiAgICAgICAgICB0aXRsZTogZWxlbWVudC5uYW1lLAogICAgICAgICAgaWNvbjogJ2Zvcm0nCiAgICAgICAgfQogICAgICB9XTsKICAgIH0sCiAgICBtYWtlQWxsRHluYW1pY01lbnVzKCkgewogICAgICBjb25zdCBhbGxJbmZvSnNvbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWxsVXNlckluZm8nKSB8fCAne30nOwogICAgICBjb25zdCBhbGxVc2VySW5mbyA9IEpTT04ucGFyc2UoYWxsSW5mb0pzb24pOwogICAgICBjb25zdCBtZW51cyA9IGFsbFVzZXJJbmZvLm1lbnVzIHx8IFtdOwogICAgICAvLyDljZXmjpIKICAgICAgZm9yIChsZXQgZmlyc3RJbmRleCA9IDA7IGZpcnN0SW5kZXggPCBtZW51cy5sZW5ndGg7IGZpcnN0SW5kZXgrKykgewogICAgICAgIGNvbnN0IGZpcnN0RWxlbWVudCA9IG1lbnVzW2ZpcnN0SW5kZXhdIHx8IHt9OwogICAgICAgIHRoaXMuZnVsbEZpc3J0Tm9DaGlsZHJlbihmaXJzdEVsZW1lbnQpOwogICAgICB9CiAgICAgIHRoaXMuYWxsTWVudXNmdWxsID0gbWVudXM7CiAgICB9LAogICAgbWFrZVN0YXRpY1JvdXRlcigpIHsKICAgICAgLy8gY29weeS4gOS4iyDkuI3og73noLTlnY/ot6/nlLHljp/lp4vmlofku7YKICAgICAgY29uc3QgY29uc3RhbnRSb3V0ZXNDb3B5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdGFudFJvdXRlcykpOwogICAgICBjb25zdCBtZW51c05vSGlkZGVuID0gY29uc3RhbnRSb3V0ZXNDb3B5LmZpbHRlcihpdGVtID0+ICFpdGVtLmhpZGRlbik7CiAgICAgIHRoaXMuYWxsTWVudXNmdWxsID0gWy4uLm1lbnVzTm9IaWRkZW4sIC4uLnRoaXMuYWxsTWVudXNmdWxsXTsKICAgICAgY29uc29sZS5sb2coJ+W3puS+p+WFqOmHj+eahOiPnOWNleaVsOaNruS4ujonLCB0aGlzLmFsbE1lbnVzZnVsbCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"AAoBA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;EAAA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACA,eACA,UACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QAAAC;MAAA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACAC;MACAA;QACAC;QACAC;MACA;IACA;IACAC;MACA;MACA;MACAH;MACAA;QACAE;MACA;IACA;IACAE;MACA;MACA;MACA;MACA;MACAJ;MACAA;QACAE;MACA;MACAF,oBACA;QACAN;QACAW;QACAC;UAAAJ;UAAAD;QAAA;MACA,EACA;IACA;IACAM;MACA;MACA;MACA;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACAC;IACA;EACA;AACA","names":["components","SidebarItem","elScrollbar","data","allMenusfull","computed","routes","activeMenu","path","variables","isCollapse","created","methods","fullMenuInfo","element","icon","title","fullRouternfo","fullFisrtNoChildren","name","meta","makeAllDynamicMenus","makeStaticRouter","console"],"sourceRoot":"src/components/layout/components/Sidebar","sources":["index.vue"],"sourcesContent":["<template>\n  <div>\n    <el-scrollbar wrap-class=\"scrollbar-wrapper\">\n      <el-menu\n        :default-active=\"activeMenu\"\n        :collapse=\"isCollapse\"\n        :background-color=\"variables.menuBg\"\n        :text-color=\"variables.menuText\"\n        :unique-opened=\"false\"\n        :active-text-color=\"variables.menuActiveText\"\n        :collapse-transition=\"false\"\n        mode=\"vertical\"\n      >\n        <sidebar-item v-for=\"route in allMenusfull\" :key=\"route.path\" :item=\"route\" :base-path=\"route.path\" />\n      </el-menu>\n    </el-scrollbar>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { Scrollbar } from 'element-ui'\nimport SidebarItem from './SidebarItem'\nimport { splitUrl } from '@/utils/qiankunMethods.js'\nimport { constantRoutes } from '@/router/index'\nimport variables from '@/styles/variables.scss'\n\nexport default {\n  components: { SidebarItem, elScrollbar: Scrollbar },\n  data() {\n    return {\n      allMenusfull: []\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'sidebar'\n    ]),\n    routes() {\n      return this.$router.options.routes\n    },\n    activeMenu() {\n      const route = this.$route\n      const { path } = route\n      return path\n    },\n    variables() {\n      return variables\n    },\n    isCollapse() {\n      return !this.sidebar.opened\n    }\n  },\n  created() {\n    this.makeAllDynamicMenus()\n    this.makeStaticRouter()\n  },\n  methods: {\n    fullMenuInfo(element) {\n      element.path = element.id\n      element.meta = {\n        icon: element.icon || element.privilegeIcon,\n        title: element.name\n      }\n    },\n    fullRouternfo(element) {\n      const pathSplit = splitUrl(element.url)\n      const allPath = pathSplit[1]\n      element.path = allPath\n      element.meta = {\n        title: element.name\n      }\n    },\n    fullFisrtNoChildren(element) {\n      const pathSplit = splitUrl(element.url)\n      const allPath = pathSplit[1]\n      const splitPath = allPath.split('/')\n      const firstPath = splitPath[1]\n      element.path = `/${firstPath}${element.id}`\n      element.meta = {\n        title: element.name\n      }\n      element.children = [\n        {\n          path: allPath,\n          name: element.id,\n          meta: { title: element.name, icon: 'form' }\n        }\n      ]\n    },\n    makeAllDynamicMenus() {\n      const allInfoJson = window.localStorage.getItem('allUserInfo') || '{}'\n      const allUserInfo = JSON.parse(allInfoJson)\n      const menus = allUserInfo.menus || []\n      // 单排\n      for (let firstIndex = 0; firstIndex < menus.length; firstIndex++) {\n        const firstElement = menus[firstIndex] || {}\n        this.fullFisrtNoChildren(firstElement)\n      }\n      this.allMenusfull = menus\n    },\n    makeStaticRouter() {\n      // copy一下 不能破坏路由原始文件\n      const constantRoutesCopy = JSON.parse(JSON.stringify(constantRoutes))\n      const menusNoHidden = constantRoutesCopy.filter(item => !item.hidden)\n      this.allMenusfull = [...menusNoHidden, ...this.allMenusfull]\n      console.log('左侧全量的菜单数据为:', this.allMenusfull)\n    }\n  }\n}\n</script>\n"]}]}