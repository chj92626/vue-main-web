{"remainingRequest":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js!/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/eslint-loader/index.js??ref--14-0!/Users/huajuncheng/Documents/git-prj/vue-main-web/src/initQiankunState/navigator.js","dependencies":[{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/src/initQiankunState/navigator.js","mtime":1666252172561},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/babel.config.js","mtime":1666252172553},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js","mtime":1663934044381},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/eslint-loader/index.js","mtime":1665751372775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHsgYXV0b0ZpbGxDb21wb25lbnQsIGFkZEFsbFJvdXRlcyB9IGZyb20gJ0AvbWFrZUFsbENvbXBvbmVudFJvdXRlci9tYWtlQ29tcG9uZW50cy5qcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXIvaW5kZXguanMnOwpleHBvcnQgY29uc3QgZ29Ub1JvdXRlciA9IHN0YXRlID0+IHsKICB2YXIgX3N0YXRlJHJvdXRlUGFyYW1zLCBfc3RhdGUkcm91dGVQYXJhbXMyLCBfZmlyc3RDaGlsZCRtZXRhOwogIGlmICghKChfc3RhdGUkcm91dGVQYXJhbXMgPSBzdGF0ZS5yb3V0ZVBhcmFtcykgIT09IG51bGwgJiYgX3N0YXRlJHJvdXRlUGFyYW1zICE9PSB2b2lkIDAgJiYgX3N0YXRlJHJvdXRlUGFyYW1zLm5hbWUpKSB7CiAgICBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogJ+e8uuWwkei3r+eUsW5hbWXvvIzor7fogZTns7vnrqHnkIblkZgnLAogICAgICB0eXBlOiAnZXJyb3InLAogICAgICBkdXJhdGlvbjogMyAqIDEwMDAKICAgIH0pOwogICAgcmV0dXJuOwogIH0KICBpZiAoISgoX3N0YXRlJHJvdXRlUGFyYW1zMiA9IHN0YXRlLnJvdXRlUGFyYW1zKSAhPT0gbnVsbCAmJiBfc3RhdGUkcm91dGVQYXJhbXMyICE9PSB2b2lkIDAgJiYgX3N0YXRlJHJvdXRlUGFyYW1zMi51cmwpKSB7CiAgICBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogJ+e8uuWwkei3r+eUsXVybO+8jOivt+iBlOezu+euoeeQhuWRmCcsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiAzICogMTAwMAogICAgfSk7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IGZ1bGxSb3V0ZXIgPSBhdXRvRmlsbENvbXBvbmVudChzdGF0ZS5yb3V0ZVBhcmFtcywgdHJ1ZSk7CiAgY29uc3QgZmlyc3RDaGlsZCA9IGZ1bGxSb3V0ZXIuY2hpbGRyZW5bMF0gfHwge307CiAgLy8g5Y+WcXVlcnkKICBjb25zdCBxdWVyeVN0ciA9ICgoX2ZpcnN0Q2hpbGQkbWV0YSA9IGZpcnN0Q2hpbGQubWV0YSkgPT09IG51bGwgfHwgX2ZpcnN0Q2hpbGQkbWV0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZpcnN0Q2hpbGQkbWV0YS5xdWVyeSkgfHwgJyc7CiAgY29uc3QgdXJsU2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cik7CiAgY29uc3QgcXVlcnkgPSBPYmplY3QuZnJvbUVudHJpZXModXJsU2VhcmNoUGFyYW1zLmVudHJpZXMoKSk7CiAgY29uc29sZS5sb2coJ3VybHF1ZXJ5JywgcXVlcnkpOwogIC8vIOi/memHjOeUn+aIkOeahGZ1bGxSb3V0ZXLlpoLmnpzmmK/ph43lpI3nmoTlrZDlupTnlKjot6/nlLHvvIxpZOS4gOagt++8jOS4lOafpeivouWPguaVsOS4gOagt++8jOmCo+S5iGFkZEFsbFJvdXRlc+eahOaXtuWAmQogIC8vIOaJp+ihjHJvdXRlci5hZGRSb3V0ZXPmlrnms5Xml7blm6DkuLpuYW1l5LiA6Ie05Lya5YWI5Yig6Zmk5YmN5LiA5Liq5ZCMbmFtZeeahOi3r+eUse+8jOS9huaYr+S4jeS8muWvuei3s+i9rOmAoOaIkOW9seWTje+8jOS9huaYr+imgeefpemBk+i/meS4qumAu+i+kQogIC8vIOS9huaYr+WcqGFkZEFsbFJvdXRl6YeM6Z2i5omL5Yqo6K6+572uQUREX0RZTkFNSUNfUk9VVEXml7bvvIzkuZ/kvJrpgKDmiJDph43lpI3nmoTlvbHlk43vvIwKICBhZGRBbGxSb3V0ZXMoW2Z1bGxSb3V0ZXJdKTsKICAvLyDpmaTkuobmraPluLjliqDlhaXlhajph4/liqjmgIHot6/nlLHlpJbvvIzogIPomZHliLBzdWJBcHDnu5nnmoTkuLTml7bot6/nlLHkvJrlrZjlnKjliLfmlrDpobXpnaLnmoTmg4XlhrXvvIzmiYDku6XpnIDopoHmlLbpm4bkuIrkvKDnmoTot6/nlLHliLDmnKzlnLDvvIwKICAvLyDnhLblkI7liLfmlrDpobXpnaLliJ3lp4vljJbot6/nlLHnmoTml7blgJnlho3miormnKzlnLDkuLTml7bot6/nlLHliqDlm57ljrsKICBjb25zdCB0ZW1wUm91dGVKc29uID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW1wUm91dGVKc29uJyk7CiAgY29uc3QgdGVtcFJvdXRlID0gdGVtcFJvdXRlSnNvbiA/IEpTT04ucGFyc2UodGVtcFJvdXRlSnNvbikgOiBbXTsKICBsZXQgcm91dGVIYXNFeGlzdCA9IGZhbHNlOwogIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0ZW1wUm91dGUubGVuZ3RoOyBpbmRleCsrKSB7CiAgICBjb25zdCBlbGVtZW50ID0gdGVtcFJvdXRlW2luZGV4XSB8fCB7fTsKICAgIGlmIChlbGVtZW50LnVybCA9PT0gc3RhdGUucm91dGVQYXJhbXMudXJsKSB7CiAgICAgIHJvdXRlSGFzRXhpc3QgPSB0cnVlOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYgKCFyb3V0ZUhhc0V4aXN0KSB7CiAgICB0ZW1wUm91dGUucHVzaChzdGF0ZS5yb3V0ZVBhcmFtcyB8fCB7fSk7CiAgfQogIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVtcFJvdXRlSnNvbicsIEpTT04uc3RyaW5naWZ5KHRlbXBSb3V0ZSkpOwogIHJvdXRlci5wdXNoKHsKICAgIHBhdGg6IGZpcnN0Q2hpbGQucGF0aCwKICAgIHF1ZXJ5CiAgfSk7Cn07"},{"version":3,"names":["Message","autoFillComponent","addAllRoutes","router","goToRouter","state","routeParams","name","message","type","duration","url","fullRouter","firstChild","children","queryStr","meta","query","urlSearchParams","URLSearchParams","Object","fromEntries","entries","console","log","tempRouteJson","window","localStorage","getItem","tempRoute","JSON","parse","routeHasExist","index","length","element","push","setItem","stringify","path"],"sources":["/Users/huajuncheng/Documents/git-prj/vue-main-web/src/initQiankunState/navigator.js"],"sourcesContent":["\nimport { Message } from 'element-ui'\nimport { autoFillComponent, addAllRoutes } from '@/makeAllComponentRouter/makeComponents.js'\nimport router from '@/router/index.js'\nexport const goToRouter = (state) => {\n  if (!state.routeParams?.name) {\n    Message({\n      message: '缺少路由name，请联系管理员',\n      type: 'error',\n      duration: 3 * 1000\n    })\n    return\n  }\n  if (!state.routeParams?.url) {\n    Message({\n      message: '缺少路由url，请联系管理员',\n      type: 'error',\n      duration: 3 * 1000\n    })\n    return\n  }\n  const fullRouter = autoFillComponent(state.routeParams, true)\n  const firstChild = fullRouter.children[0] || {}\n  // 取query\n  const queryStr = firstChild.meta?.query || ''\n  const urlSearchParams = new URLSearchParams(queryStr)\n  const query = Object.fromEntries(urlSearchParams.entries())\n  console.log('urlquery', query)\n  // 这里生成的fullRouter如果是重复的子应用路由，id一样，且查询参数一样，那么addAllRoutes的时候\n  // 执行router.addRoutes方法时因为name一致会先删除前一个同name的路由，但是不会对跳转造成影响，但是要知道这个逻辑\n  // 但是在addAllRoute里面手动设置ADD_DYNAMIC_ROUTE时，也会造成重复的影响，\n  addAllRoutes([fullRouter])\n  // 除了正常加入全量动态路由外，考虑到subApp给的临时路由会存在刷新页面的情况，所以需要收集上传的路由到本地，\n  // 然后刷新页面初始化路由的时候再把本地临时路由加回去\n  const tempRouteJson = window.localStorage.getItem('tempRouteJson')\n  const tempRoute = tempRouteJson ? JSON.parse(tempRouteJson) : []\n  let routeHasExist = false\n  for (let index = 0; index < tempRoute.length; index++) {\n    const element = tempRoute[index] || {}\n    if (element.url === state.routeParams.url) {\n      routeHasExist = true\n      break\n    }\n  }\n  if (!routeHasExist) {\n    tempRoute.push(state.routeParams || {})\n  }\n  window.localStorage.setItem('tempRouteJson', JSON.stringify(tempRoute))\n\n  router.push({\n    path: firstChild.path,\n    query\n  })\n}\n"],"mappings":";AACA,SAASA,OAAO,QAAQ,YAAY;AACpC,SAASC,iBAAiB,EAAEC,YAAY,QAAQ,4CAA4C;AAC5F,OAAOC,MAAM,MAAM,mBAAmB;AACtC,OAAO,MAAMC,UAAU,GAAIC,KAAK,IAAK;EAAA;EACnC,IAAI,wBAACA,KAAK,CAACC,WAAW,+CAAjB,mBAAmBC,IAAI,GAAE;IAC5BP,OAAO,CAAC;MACNQ,OAAO,EAAE,iBAAiB;MAC1BC,IAAI,EAAE,OAAO;MACbC,QAAQ,EAAE,CAAC,GAAG;IAChB,CAAC,CAAC;IACF;EACF;EACA,IAAI,yBAACL,KAAK,CAACC,WAAW,gDAAjB,oBAAmBK,GAAG,GAAE;IAC3BX,OAAO,CAAC;MACNQ,OAAO,EAAE,gBAAgB;MACzBC,IAAI,EAAE,OAAO;MACbC,QAAQ,EAAE,CAAC,GAAG;IAChB,CAAC,CAAC;IACF;EACF;EACA,MAAME,UAAU,GAAGX,iBAAiB,CAACI,KAAK,CAACC,WAAW,EAAE,IAAI,CAAC;EAC7D,MAAMO,UAAU,GAAGD,UAAU,CAACE,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;EAC/C;EACA,MAAMC,QAAQ,GAAG,qBAAAF,UAAU,CAACG,IAAI,qDAAf,iBAAiBC,KAAK,KAAI,EAAE;EAC7C,MAAMC,eAAe,GAAG,IAAIC,eAAe,CAACJ,QAAQ,CAAC;EACrD,MAAME,KAAK,GAAGG,MAAM,CAACC,WAAW,CAACH,eAAe,CAACI,OAAO,EAAE,CAAC;EAC3DC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEP,KAAK,CAAC;EAC9B;EACA;EACA;EACAf,YAAY,CAAC,CAACU,UAAU,CAAC,CAAC;EAC1B;EACA;EACA,MAAMa,aAAa,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAClE,MAAMC,SAAS,GAAGJ,aAAa,GAAGK,IAAI,CAACC,KAAK,CAACN,aAAa,CAAC,GAAG,EAAE;EAChE,IAAIO,aAAa,GAAG,KAAK;EACzB,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGJ,SAAS,CAACK,MAAM,EAAED,KAAK,EAAE,EAAE;IACrD,MAAME,OAAO,GAAGN,SAAS,CAACI,KAAK,CAAC,IAAI,CAAC,CAAC;IACtC,IAAIE,OAAO,CAACxB,GAAG,KAAKN,KAAK,CAACC,WAAW,CAACK,GAAG,EAAE;MACzCqB,aAAa,GAAG,IAAI;MACpB;IACF;EACF;EACA,IAAI,CAACA,aAAa,EAAE;IAClBH,SAAS,CAACO,IAAI,CAAC/B,KAAK,CAACC,WAAW,IAAI,CAAC,CAAC,CAAC;EACzC;EACAoB,MAAM,CAACC,YAAY,CAACU,OAAO,CAAC,eAAe,EAAEP,IAAI,CAACQ,SAAS,CAACT,SAAS,CAAC,CAAC;EAEvE1B,MAAM,CAACiC,IAAI,CAAC;IACVG,IAAI,EAAE1B,UAAU,CAAC0B,IAAI;IACrBtB;EACF,CAAC,CAAC;AACJ,CAAC"}]}