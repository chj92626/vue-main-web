{"remainingRequest":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js!/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huajuncheng/Documents/git-prj/vue-main-web/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/src/views/login/index.vue","mtime":1667785065887},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/babel.config.js","mtime":1666252172553},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/babel-loader/lib/index.js","mtime":1663934044381},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/cache-loader/dist/cjs.js","mtime":1663934044279},{"path":"/Users/huajuncheng/Documents/git-prj/vue-main-web/node_modules/vue-loader/lib/index.js","mtime":1663934057394}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOyAvLyBnZXQgdG9rZW4gZnJvbSBjb29raWUKaW1wb3J0IHsgaW5pdFN0YXRlIH0gZnJvbSAiQC9pbml0UWlhbmt1blN0YXRlL2luZGV4LmpzIjsKaW1wb3J0IHsgbWFrZUFsbFJvdXRlciB9IGZyb20gIkAvbWFrZUFsbENvbXBvbmVudFJvdXRlci9pbmRleC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEoKSB7CiAgICBjb25zdCB2YWxpZGF0ZVBhc3N3b3JkID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUubGVuZ3RoIDwgMSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5a+G56CB5LiN6IO95L2O5LqOMeS9jSIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlck5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9LAogICAgICBsb2dpblJ1bGVzOiB7CiAgICAgICAgdXNlck5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXnlKjmiLflkI0iCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzd29yZAogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHBhc3N3b3JkVHlwZTogInBhc3N3b3JkIiwKICAgICAgY2Fwc1Rvb2x0aXA6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5sb2dpbkZvcm0udXNlck5hbWUgPT09ICIiKSB7CiAgICAgIHRoaXMuJHJlZnMudXNlck5hbWUuZm9jdXMoKTsKICAgIH0gZWxzZSBpZiAodGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQgPT09ICIiKSB7CiAgICAgIHRoaXMuJHJlZnMucGFzc3dvcmQuZm9jdXMoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoZWNrQ2Fwc2xvY2soZSkgewogICAgICBjb25zdCB7CiAgICAgICAga2V5CiAgICAgIH0gPSBlOwogICAgICB0aGlzLmNhcHNUb29sdGlwID0ga2V5ICYmIGtleS5sZW5ndGggPT09IDEgJiYga2V5ID49ICJBIiAmJiBrZXkgPD0gIloiOwogICAgfSwKICAgIHNob3dQd2QoKSB7CiAgICAgIGlmICh0aGlzLnBhc3N3b3JkVHlwZSA9PT0gInBhc3N3b3JkIikgewogICAgICAgIHRoaXMucGFzc3dvcmRUeXBlID0gIiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXNzd29yZFR5cGUgPSAicGFzc3dvcmQiOwogICAgICB9CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnBhc3N3b3JkLmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUxvZ2luKCkgewogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IHsKICAgICAgICAgICAgICBuYW1lOiAic3RldmVuIiwKICAgICAgICAgICAgICB1c2VybmFtZTogInN0ZXZlbiIsCiAgICAgICAgICAgICAgYXV0aFRva2VuOiAiNDAwZTQzODYtMzhmMS00ZDU2LWFiNjMtYTliMGEyNjk0MzQ0ZGMiLAogICAgICAgICAgICAgIG1lbnVzOiBbewogICAgICAgICAgICAgICAgbmFtZTogIuaJi+acuuS4muWKoeadpeiHquWtkOW6lOeUqHVybCIsCiAgICAgICAgICAgICAgICBpZDogInN1Yl9hcHAiLAogICAgICAgICAgICAgICAgdXJsOiAiaHR0cDovLzE5Mi4xNjguMS4xMDg6ODA4MS8jL3N1Ym9yaWdpbi9zdWJvcmlnaW4iIC8vIOWtkOezu+e7n+i3r+eUsQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG5hbWU6ICLnlLXor53kuJrliqHmnaXoh6rlrZDlupTnlKh1cmwiLAogICAgICAgICAgICAgICAgaWQ6ICJzdWJfYXBwMiIsCiAgICAgICAgICAgICAgICB1cmw6ICJodHRwOi8vMTkyLjE2OC4xLjEwODo4MDgxLyMvc3ViYXR0ci9zdWJhdHRyIgogICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlczsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhbGxVc2VySW5mbyIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpOwogICAgICAgICAgICAvLyDliJ3lp4vljJbkub7lnaTnirbmgIEKICAgICAgICAgICAgaW5pdFN0YXRlKCk7CiAgICAgICAgICAgIC8vIGluaXRTdGF0ZeS5i+WQjiB3aW5kb3cuYWN0aW9uc1FpYW5rdW7kuIDlrprmmK/lrZjlnKjnmoQg5Y+v5Lul5pS+5b+D5Y+Y5pu0dG9rZW4KICAgICAgICAgICAgd2luZG93LmFjdGlvbnNRaWFua3VuLnNldEdsb2JhbFN0YXRlKHsKICAgICAgICAgICAgICBhdXRoVG9rZW46IHJlc3VsdC5hdXRoVG9rZW4sCiAgICAgICAgICAgICAgYXBwTmFtZTogIldPUktTUEFDRSIsCiAgICAgICAgICAgICAgZXZlbnRUeXBlOiAiU0VUX1RPS0VOIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8g5Yid5aeL5YyW6Lev55SxCiAgICAgICAgICAgIG1ha2VBbGxSb3V0ZXIoKTsKICAgICAgICAgICAgc2V0VG9rZW4ocmVzdWx0LmF1dGhUb2tlbik7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAiRGFzaGJvYXJkIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;AAwEA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACA;QACAC;MACA;QACAA;MACA;IACA;IACA;MACAC;QACAC;QACAC;MACA;MACAC;QACAF,WACA;UAAAG;UAAAC;UAAAC;QAAA,EACA;QACAJ,WACA;UAAAE;UAAAC;UAAAE;QAAA;MAEA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MACA;QAAAC;MAAA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;UACAC;YACA;cACApB;cACAqB;cACAC;cACAC,QACA;gBACAvB;gBACAwB;gBACAC;cACA,GACA;gBACAzB;gBACAwB;gBACAC;cACA;YAEA;YACA;YACAC;YACA;YACAC;YACA;YACAD;cACAJ;cACAM;cACAC;YACA;YACA;YACAC;YACAC;YACA;cACA/B;YACA;YACA;UACA;QACA;UACAgC;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","callback","loginForm","userName","password","loginRules","required","trigger","message","validator","passwordType","capsTooltip","loading","mounted","methods","checkCapslock","key","showPwd","handleLogin","setTimeout","username","authToken","menus","id","url","window","initState","appName","eventType","makeAllRouter","setToken","console"],"sourceRoot":"src/views/login","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-form\n      ref=\"loginForm\"\n      :model=\"loginForm\"\n      :rules=\"loginRules\"\n      class=\"login-form\"\n      autocomplete=\"on\"\n      label-position=\"left\"\n    >\n      <div class=\"title-container\">\n        <h3 class=\"title\">微前端主应用workspace</h3>\n      </div>\n\n      <el-form-item prop=\"userName\">\n        <span class=\"svg-container\">\n          <svg-icon icon-class=\"user\" />\n        </span>\n        <el-input\n          ref=\"userName\"\n          v-model=\"loginForm.userName\"\n          placeholder=\"用户名\"\n          name=\"userName\"\n          type=\"text\"\n          tabindex=\"1\"\n          autocomplete=\"on\"\n        />\n      </el-form-item>\n\n      <el-tooltip\n        v-model=\"capsTooltip\"\n        content=\"Caps lock is On\"\n        placement=\"right\"\n        manual\n      >\n        <el-form-item prop=\"password\">\n          <span class=\"svg-container\">\n            <svg-icon icon-class=\"password\" />\n          </span>\n          <el-input\n            :key=\"passwordType\"\n            ref=\"password\"\n            v-model=\"loginForm.password\"\n            :type=\"passwordType\"\n            placeholder=\"密码\"\n            name=\"password\"\n            tabindex=\"2\"\n            autocomplete=\"on\"\n            @keyup.native=\"checkCapslock\"\n            @blur=\"capsTooltip = false\"\n            @keyup.enter.native=\"handleLogin\"\n          />\n          <span class=\"show-pwd\" @click=\"showPwd\">\n            <svg-icon\n              :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\n            />\n          </span>\n        </el-form-item>\n      </el-tooltip>\n\n      <el-button\n        :loading=\"loading\"\n        type=\"primary\"\n        style=\"width: 100%; margin-bottom: 30px\"\n        @click.native.prevent=\"handleLogin\"\n        >登录</el-button\n      >\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { setToken } from \"@/utils/auth\"; // get token from cookie\nimport { initState } from \"@/initQiankunState/index.js\";\nimport { makeAllRouter } from \"@/makeAllComponentRouter/index.js\";\nexport default {\n  name: \"Login\",\n  data() {\n    const validatePassword = (rule, value, callback) => {\n      if (value.length < 1) {\n        callback(new Error(\"密码不能低于1位\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      loginForm: {\n        userName: \"\",\n        password: \"\",\n      },\n      loginRules: {\n        userName: [\n          { required: true, trigger: \"blur\", message: \"请输入用户名\" },\n        ],\n        password: [\n          { required: true, trigger: \"blur\", validator: validatePassword },\n        ],\n      },\n      passwordType: \"password\",\n      capsTooltip: false,\n      loading: false,\n    };\n  },\n  mounted() {\n    if (this.loginForm.userName === \"\") {\n      this.$refs.userName.focus();\n    } else if (this.loginForm.password === \"\") {\n      this.$refs.password.focus();\n    }\n  },\n  methods: {\n    checkCapslock(e) {\n      const { key } = e;\n      this.capsTooltip = key && key.length === 1 && key >= \"A\" && key <= \"Z\";\n    },\n    showPwd() {\n      if (this.passwordType === \"password\") {\n        this.passwordType = \"\";\n      } else {\n        this.passwordType = \"password\";\n      }\n      this.$nextTick(() => {\n        this.$refs.password.focus();\n      });\n    },\n    handleLogin() {\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          setTimeout(() => {\n            const res = {\n              name: \"steven\",\n              username: \"steven\",\n              authToken: \"400e4386-38f1-4d56-ab63-a9b0a2694344dc\",\n              menus: [\n                {\n                  name: \"手机业务来自子应用url\",\n                  id: \"sub_app\",\n                  url: \"http://192.168.1.108:8081/#/suborigin/suborigin\" // 子系统路由\n                },\n                {\n                  name: \"电话业务来自子应用url\",\n                  id: \"sub_app2\",\n                  url: \"http://192.168.1.108:8081/#/subattr/subattr\"\n                },\n              ],\n            };\n            const result = res;\n            window.localStorage.setItem(\"allUserInfo\", JSON.stringify(result));\n            // 初始化乾坤状态\n            initState();\n            // initState之后 window.actionsQiankun一定是存在的 可以放心变更token\n            window.actionsQiankun.setGlobalState({\n              authToken: result.authToken,\n              appName: \"WORKSPACE\",\n              eventType: \"SET_TOKEN\",\n            });\n            // 初始化路由\n            makeAllRouter();\n            setToken(result.authToken);\n            this.$router.push({\n              name: \"Dashboard\",\n            });\n            this.loading = false;\n          }, 1000);\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n/* 修复input 背景不协调 和光标变色 */\n/* Detail see https://github.com/PanJiaChen/vue-element-admin/pull/927 */\n\n$bg: #283443;\n$light_gray: #fff;\n$cursor: #fff;\n\n@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\n  .login-container .el-input input {\n    color: $cursor;\n  }\n}\n\n/* reset element-ui css */\n.login-container {\n  .el-input {\n    display: inline-block;\n    height: 47px;\n    width: 85%;\n    margin-left: 10px;\n\n    input {\n      background: transparent;\n      border: none;\n    }\n  }\n\n  .el-form-item {\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 5px;\n    color: #454545;\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n$dark_gray: #889aa4;\n$light_gray: #eee;\n\n.login-container {\n  height: 100%;\n  width: 100%;\n  background: url(\"../../assets/login.jpeg\") no-repeat;\n  background-size: cover;\n  overflow: hidden;\n\n  .login-form {\n    position: relative;\n    width: 520px;\n    max-width: 100%;\n    padding: 160px 35px 0;\n    margin: 0 auto;\n    overflow: hidden;\n  }\n\n  .tips {\n    font-size: 14px;\n    color: #fff;\n    margin-bottom: 10px;\n\n    span {\n      &:first-of-type {\n        margin-right: 16px;\n      }\n    }\n  }\n\n  .svg-container {\n    padding: 6px 5px 6px 15px;\n    color: $dark_gray;\n    vertical-align: middle;\n    width: 30px;\n    display: inline-block;\n  }\n\n  .title-container {\n    position: relative;\n\n    .title {\n      font-size: 26px;\n      color: $light_gray;\n      margin: 0px auto 40px auto;\n      text-align: center;\n      font-weight: bold;\n    }\n  }\n\n  .show-pwd {\n    position: absolute;\n    right: 10px;\n    top: 7px;\n    font-size: 16px;\n    color: $dark_gray;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .thirdparty-button {\n    position: absolute;\n    right: 0;\n    bottom: 6px;\n  }\n\n  @media only screen and (max-width: 470px) {\n    .thirdparty-button {\n      display: none;\n    }\n  }\n}\n</style>\n"]}]}